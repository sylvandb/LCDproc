#!/bin/sh
# This is the lcdproc init-script for Mandrake systems
# It should work on Redhat, too, which is untested
#
# Copyright (C) 2001  Rene Wagner <reenoo@gmx.de>
#
# This script is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# any later version.
#
# This script is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this file; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307
#
#
# chkconfig: 345 70 20
# description: lcdproc(1) is the LCDproc client used for displaying text and other data to LCDs. \
#	Apart from the main client lcdproc(1) there are various clients. \
#	See http://lcdproc.omnipotent.net for details.
# processname: lcdproc
# config: /etc/sysconfig/lcdproc

#CONFIG=/etc/sysconfig/lcdproc

# Source function library.
. /etc/init.d/functions

RETVAL=0

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir=@bindir@
sbindir=@sbindir@
etc=@sysconfdir@

LCDd=${sbindir}/lcdproc

start() {
	echo -n $"Starting up lcdproc @VERSION@: "
	test -r "$CONFIG" && . "$CONFIG"
	daemon ${lcdproc} C X

	RETVAL=$?
	[ $RETVAL -eq 0 ] && touch /var/lock/subsys/lcdproc
	echo
}

stop() {
	echo -n $"Shutting down lcdproc: "
	killproc lcdproc
	RETVAL=$?
	[ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/lcdproc
	echo
}

dostatus() {
	status lcdproc
	RETVAL=$?
}

restart() {
	stop
	start
	RETVAL=$?
}

condrestart() {
	[ -e /var/lock/subsys/lcdproc ] && restart || :
}

# See how we were called.
case "$1" in
  start)
	start
	;;
  stop)
	stop
	;;
  status)
	dostatus
	;;
  restart|reload)
	restart
	;;
  condrestart)
	condrestart
	;;
  *)
	echo "Usage: apmd.init {start|stop|status|restart|reload|condrestart}"
	exit 1
esac

exit $RETVAL
